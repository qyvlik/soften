# soften

soften c++. May be can use on script.

实现了一个汇编解释器。

## 汇编解释器

自定义了一门汇编语言，可以和宿主语言进行交互。

## 字符串绑定到 C++ 函数

通过字符串映射 C++ 函数，或者成员函数，做到通过字符串来调用 C++ 函数。

这个是构建起一个 DSL 到宿主语言的重要步骤。

本项目中字符串与 C++ 函数之间的映射具有多态行。

## 提取函数的信息

提取函数的信息，参数个数，参数类型。

在完成手动字符串映射 C++ 函数的时候，有一定的帮助作用。

## 中文支持

有限中文支持，一个是读写 `UTF-8` 编码文件，已经处理好了，另一个是在控制台输出中文。这个尝试了许多方法，最终不了了之。

### 总结

1. 认清你的代码处在何种编码的环境。

2. 认清放在你字符串里面的数据是何种编码。

3. 认清你要向具有何种编码的屏幕传送数据。

4. 解铃还须系铃人。

5. 非特殊情况下不建议使用wchar_t来存放中文字符。

很多时候中文并不是硬编码进程序的，例如一段中文来自网络，以 gb2312 编码，而"屏幕"只认 UTF8，这个时候就要进行必要的编码转换。

boost 库的 `boost::locale::conv` 中提供了很多常用的转换模板函数，来实现宽窄字符、`ansi` 和 `utf` 之间的相互转换。

[C++字符编码问题探究和中文乱码的产生](http://my.oschina.net/ybusad/blog/363139)

[Reading UTF-8 with C++ streams](http://www.codeproject.com/Articles/38242/Reading-UTF-with-C-streams)
